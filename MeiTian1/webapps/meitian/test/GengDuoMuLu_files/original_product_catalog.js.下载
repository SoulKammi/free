define("publicHeaderNav",["jquery"],function(a){return{itHover:function(){var b=a(".public_headernav_module .nav li");b.bind("mouseenter",function(){clearTimeout(c),a(this).hasClass("chubannav")||a(this).hasClass("yuanchuangnav")?(a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(this).hasClass("chubannav")?(a(".chuban").css({display:"block"}),a(".public_child_nav").css({display:"block"})):a(this).hasClass("yuanchuangnav")&&(a(".yuanchuang").css({display:"block"}),a(".public_child_nav").css({display:"block"}))):(a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(".public_child_nav").css({display:"none"}))});var c=null;b.bind("mouseleave",function(){c=setTimeout(function(){a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(".public_child_nav").css({display:"none"})},1e3)});var d=a(".public_headerchildnav_module");d.bind("mouseenter",function(){clearTimeout(c)}),d.bind("mouseleave",function(){a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(".public_child_nav").css({display:"none"})})}}}),define("publicHeaderChildnavModule",["jquery"],function(a){return{itHover:function(){a(".yuanchuang .inner a").bind("mouseenter",function(){a(".yuanchuang .inner a i").removeClass("on"),a(this).find("i").addClass("on")})}}}),define("publicSideCodeModule",["jquery"],function(a){return{toTop:function(){a(".public_totop_module, .back_to_top").on("click",function(){a(window).scrollTop(0)}),a(window).bind("scroll",function(){0===a(window).scrollTop()?a(".public_totop_module").hide():a(".public_totop_module").show()})},closeCode:function(){a(".public_sideecode_module .close").on("click",function(){a(".public_sideecode_module").css({display:"none"})})}}}),define("ddbase",["jquery","underscore"],function(a,b){var c=c||{};return c.header_trim=function(a){return a.replace(/(\s*$)|(^\s*)/g,"")},c.getCookie=function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?decodeURIComponent(escape(b[2])):null},c.token=function(){var a=c.getCookie("sessionID");return null===a&&(a=""),a},c.setCookie=function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+60*c*60*1e3),document.cookie=d?a+"="+escape(b)+";Domain="+d+";path=/;expires="+e.toGMTString():a+"="+escape(b)+";Domain=dangdang.com;path=/;expires="+e.toGMTString()},c.delCookie=function(a){var b=new Date;b.setTime(b.getTime()-1);var d=c.getCookie(a);null!=d&&(document.cookie=a+"="+d+";expires="+b.toGMTString()+"; path=/;Domain=dangdang.com")},c.setData=function(a,b,d){var b=encodeURIComponent(b);if(window.localStorage){window.localStorage.setItem(a,b)}else c.setCookie(a,b,d)},c.getData=function(a){if(window.localStorage){var b=window.localStorage;return b.getItem(a)?decodeURIComponent(b.getItem(a)):null}c.getCookie(a)},c.delData=function(a){if(window.localStorage){window.localStorage.removeItem(a)}else c.delCookie(a)},c.dateFormat=function(a,b){var c=b,d=new Date(a),e={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),S:d.getMilliseconds()};/(y+)/.test(c)&&(c=c.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length)));for(var f in e)new RegExp("("+f+")").test(c)&&(c=c.replace(RegExp.$1,1==RegExp.$1.length?e[f]:("00"+e[f]).substr((""+e[f]).length)));return c},c.randomNumeric=function(a){for(var b="",c=a,d=0;d<c;d++)b+=Math.floor(10*Math.random());return b},c.generateGuid=function(){var a="",b=(new Date).getTime();return b=b.substring(b.length()-3,b.length()),a=c.dateFormat(new Date,"yyyyMMddHHmmss")+b+c.randomNumeric(6)+c.randomNumeric(6)+c.randomNumeric(6),a.toString()},c.getQueryString=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?decodeURIComponent(c[2]):null},c.loadJsFiles=function(a,b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",b),a.append(c)},c.UUID=function(){this.id=this.createUUID()},c.UUID.prototype={valueOf:function(){return this.id},toString:function(){return this.id},createUUID:function(){var a=this,b=new Date(1582,10,15,0,0,0,0),c=new Date,d=c.getTime()-b.getTime();return a.getIntegerBits(d,0,31)+a.getIntegerBits(d,32,47)+(a.getIntegerBits(d,48,59)+"1")+a.getIntegerBits(a.rand(4095),0,7)+a.getIntegerBits(a.rand(4095),0,7)+(a.getIntegerBits(a.rand(8191),0,7)+a.getIntegerBits(a.rand(8191),8,15)+a.getIntegerBits(a.rand(8191),0,7)+a.getIntegerBits(a.rand(8191),8,15)+a.getIntegerBits(a.rand(8191),0,15))},getIntegerBits:function(a,b,c){var d=this.returnBase(a,16),e=new Array,f="",g=0;for(g=0;g<d.length;g++)e.push(d.substring(g,g+1));for(g=Math.floor(b/4);g<=Math.floor(c/4);g++)e[g]&&""!=e[g]?f+=e[g]:f+="0";return f},returnBase:function(a,b){return a.toString(b).toUpperCase()},rand:function(a){return Math.floor(Math.random()*(a+1))}},c.getUserName=function(){var b=c.getCookie("MDD_username");return null==b&&a.ajax({method:"GET",url:"/media/api2.go?action=getUser&selfType=0&pubId=5&rewardIcon="+c.setBaseApiParams(),async:!1,success:function(a){if(0==parseInt(a.status.code)){var d=a.data.userInfo;c.setCookie("MDD_username",d.nickName,8760),c.setCookie("MDD_custId",d.pubCustId,8760),b=d.nickName}}}),b},c.getCustId=function(){return!(!c.token()||null==c.token())&&(a.ajax({method:"GET",url:"/media/api2.go?action=getUser&selfType=0&pubId=5&rewardIcon="+c.setBaseApiParams(),async:!1,success:function(a){if(0==parseInt(a.status.code)){var b=a.data.userInfo;custId=decodeURIComponent(b.pubCustId)}}}),custId)},c.setBaseApiParams=function(){var a=c.getQueryString("channelId");null==a&&(a=7e4);var b=c.getCookie("__permanent_id");return null==b&&(b=""),"&deviceSerialNo=html5&macAddr=html5&channelType=html5&permanentId="+b+"&returnType=json&channelId="+a+"&clientVersionNo=5.8.4&platformSource=DDDS-P&fromPlatform=106&deviceType=pconline&token="+c.token()},c.baseApiParams=c.setBaseApiParams(),c.template=function(a,c){return b.template(a)(c)},c.dealTime=function(a){if(void 0==a)return"";var a=parseInt(a),b=(new Date).getTime()-a;if(b>0){if(b-864e5>0){var c=new Date(a);return c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()}var d=b/1e3;if(parseInt(d/60)<60)return parseInt(d/60)+"分钟前";var e=Math.floor(d/3600);return e+"小时"+parseInt((d-3600*e)/60)+"分钟前"}return"0分钟前"},c.newDealTime=function(a){function b(a){return 1===(a+"").length?"0"+a:a}function c(){var a=new Date;return 1e3*(3600*a.getHours()+60*a.getMinutes()+a.getSeconds())}if(!a)return"";var d=parseInt(a),a=new Date(d),e=new Date,f=e.getTime(),g=a.getFullYear(),h=e.getFullYear(),i=a.getMonth()+1,j=a.getDate(),k=a.getHours(),l=a.getMinutes();if(g<h)return b(g)+"-"+b(i)+"-"+b(j);var m=c();return f-d<m?"今天 "+b(k)+":"+b(l):f-d>m&&f-d<m+864e5?"昨天"+b(k)+":"+b(l):b(i)+"-"+b(j)},c.leaveTime=function(a){var a=parseInt(a);if(isNaN(a)||!a)return 0;var b=a-(new Date).getTime();if(b<=0)return 0;var c=864e5,d=36e5,e=6e4,f=1e3;return b>=c?parseInt(b/c)+"天":b>=d?parseInt(b/d)+"小时":b>=e?parseInt(b/e)+"分钟":b>=f?parseInt(b/f)+"秒":void 0},c.getBookUrl=function(a){var b=a.mediaType||a.bookType;if(!b)return null;var c="";switch(b){case 1:case 2:case 4:a.saleId&&a.mediaId&&(c="./products/"+a.saleId+".html");break;case 3:a.productId&&(c="http://product.dangdang.com/"+a.productId+".html")}return c},c.joinBar=function(b){a.get("/media/api.go?action=barMember"+c.baseApiParams,{actionType:b.actionType||1,barId:b.barId,custId:b.custId||""},function(a){if(0!=a.status.code&&10003!=a.status.code&&25015!=a.status.code)return void c.setMessageTip("好像发生了什么事情，稍后再试试吧~");b.callback(a)})},c.onTime=function(b){var c=a(window).scrollTop(),d=a(document).height();return c+a(window).height()+b>=d},c.dealStar=function(a){return Math.round(a)},c.login=function(){location.href="https://login.dangdang.com/signin.aspx?returnurl="+encodeURIComponent(location.href)},c.setMessageTip=function(b){var c=this;c.msgTip=a(".message-tip"),0==c.msgTip.length&&(c.msgTip=a('<div class="message-tip"></div>'),a("body").append(c.msgTip)),clearTimeout(c.msgTipTime),c.msgTip.html(b).fadeIn(1e3),c.msgTipTime=setTimeout(function(){c.msgTip.fadeOut(1e3)},2500)},c.hideMessageTip=function(){var b=this;b.msgTip=a(".message-tip"),clearTimeout(b.msgTipTime),b.msgTip.hide()},c.getHost=function(){return"http://e.dangdang.com/"},window.productPostsNum=function(){window.productDetailReturn&&window.productBarReturn&&a("#postNum").length>0&&""==a("#postNum").html()&&a("#postNum").html("("+window.productComNum+"人评论)")},window.productComNum=0,window.productDetailReturn=!1,window.productBarReturn=!1,window.nofind=function(a,b){a.src=b||"img/book_def_180_260.png",a.onerror=null},document.ondragstart=function(){return!1},c}),define("loginModule",["jquery","ddbase"],function(a,b){return function(a){if(""==b.token()){var c,d="https://login.dangdang.com/signin.aspx";c=void 0!=a&&""!=a?a:window.location.href.toString(),window.location.href=d+"?returnurl="+encodeURIComponent(c)}}}),define("signOutModule",["jquery","ddbase"],function(a,b){return function(c){if(""!=b.token()){var d="/media/api2.go?action=loginOutV2"+b.setBaseApiParams();a.ajax({method:"POST",url:d,success:function(a){0==parseInt(a.status.code)&&(b.delCookie("sessionID"),b.delCookie("MDD_username"),b.delCookie("MDD_custId"),b.delCookie("login.dangdang.com"),void 0!=c&&c())}})}}}),define("headerChildNav",["jquery","ddbase"],function(a,b){return{init:function(a){var c=this;"original_index"==c.judgePage()&&("man"==b.getQueryString("originalSex")||null==b.getQueryString("originalSex")?c.initPage(a,0):"woman"==b.getQueryString("originalSex")&&c.initPage(a,1)),c.change(a)},change:function(b){a("#originLeftMenuMan").click(function(){window.location.href="original_index_page.html?originalSex=man"}),a("#originLeftMenuWoman").click(function(){window.location.href="original_index_page.html?originalSex=woman"})},clickfn:function(a,b){this.initPage(a,b)},judgePage:function(){var a=window.location.pathname,b=a.lastIndexOf("/");return a=a.substr(b+1,a.length-b),a=a.split("_page")[0]},initPage:function(b,c){for(key in b)"#focusPic"!=b[key]?(a(b[key]).find(".sexContent").hide().eq(c).show(),a(b[key]).find(".more li").hide().eq(c).show(),a(b[key]).find(".nav li").hide().eq(c).show(),a(window).scroll()):(a(b[key]).find(".sexContent").css({opacity:0,"z-index":1}).eq(c).css({opacity:1,"z-index":10}),0==c&&window.originWomanPic&&window.originManPic?(originWomanPic.timer=setTimeout(function(){window.originWomanPic.stop()},0),window.originManPic.stop(),window.originManPic.play()):1==c&&window.originWomanPic&&window.originManPic&&(originManPic.timer=setTimeout(function(){window.originManPic.stop()},0),window.originWomanPic.stop(),window.originWomanPic.play()))}}}),define("publicMethodNew",["jquery","publicHeaderNav","publicHeaderChildnavModule","publicSideCodeModule","loginModule","signOutModule","ddbase","headerChildNav"],function(a,b,c,d,e,f,g,h){var i={init:function(){b.itHover(),d.toTop(),d.closeCode(),c.itHover(),this.checkReadingCenterLogin(),this.jumpToRecharge(),this.jumpToMyShelf(),this.headerNavHover(),h.init({el1:"#originHotArticle",el2:"#originRecommend",el3:"#originLimitedFree",el4:"#originRightRecomend",el5:"#originBigAds",el6:"#hotWholeBook",el7:"#originalHotTopic",el8:"#focusPic",el9:"#rewardsListBySe",el10:"#rewardsListBySex"}),i.setHeaderImg(),a("#loginBtn").click(function(){e()}),a("#signOutBtn").on("click",function(){f(i.setLoginHtml())}),a("#headerMyOrder").on("click",function(){if(""==g.token()){var a=window.location.href;a=a.split("/"),a[a.length-1]="http://orderb.dangdang.com/myallorders.aspx",a=a.join("/"),e(a)}else window.location="http://orderb.dangdang.com/myallorders.aspx"});var j=g.getQueryString("channelId");null==j&&(j=7e4),g.setCookie("MDD_channelId",j,8760),g.setCookie("MDD_fromPlatform","307",8760),this.readcenterRedpoint()},setHeaderImg:function(){if(""!=g.token()){var b=g.getUserName(),c='<img class="header_img" src="img/payment/head_img.png">'+b;a("#loginBtn").html(c),a("#loginBtn").after('<span id="signOutBtn">[退出]</span>'),a("#registerBtn").html("")}},headerNavHover:function(){a("#bookClass,#bookClassBox").mouseout(function(){a("#bookClass .upDown").removeClass("isSlide"),a("#bookClassBox").removeClass("showMenu")}),a("#bookClass,#bookClassBox").mouseover(function(){a("#bookClass .upDown").addClass("isSlide"),a("#bookClassBox").addClass("showMenu")})},setLoginHtml:function(){a("#signOutBtn").remove(),a("#loginBtn").html("你好，请登录"),a("#registerBtn").html('<a target="_blank" href="https://login.dangdang.com/Register.aspx?returnurl=http://e.dangdang.com/">免费注册</a>|')},setProductTotalCount:function(b){parseInt(b)>0&&a(".public_headersearch_module .shopcar_num").html("("+b+")"),0==parseInt(b)&&a(".public_headersearch_module .shopcar_num").html("")},checkReadingCenterLogin:function(){a("#readingCenterBtn").on("click",function(a){if(a.preventDefault(),g.token()&&""!=g.token())window.location.href="http://e.dangdang.com/reading_center_page.html";else{var b=window.location.href;e(b)}})},jumpToRecharge:function(){a(".public_headernav_module .want_to_recharge").on("click",function(a){a.preventDefault(),g.token()&&""!=g.token()?window.location.href="http://e.dangdang.com/recharge_methord_page.html?fromPlatform=309":e()})},readcenterRedpoint:function(){var b=this;g.token()&&a.get("/media/api.go?action=getCustomerSubscription"+g.baseApiParams,{start:0,end:10},function(a){0==a.status.code&&0!=a.data.allUpdateChapter&&0!=a.data.allUpdateMedia&&(g.getCookie("showzhuigengredpointer")||b.zhuigengNotice(a.data))})},jumpToMyShelf:function(){a("#toMyBookShelf").on("click",function(a){a.preventDefault();var b="http://e.dangdang.com/booksshelf_page.html";g.token()&&""!=g.token()?window.location.href=b:e(b)})},getMedia:function(a){for(var b={},c=0;c<a.mediaList.length;c++)if(a.mediaList[c].subscriptionCount>0){b=a.mediaList[c];break}return 1==a.allUpdateMedia?'<span class="title">'+b.title+'</span>已经更新至<span class="lastChapt">'+b.lastUpdateChapter+"</span>":'<span class="title">'+b.title+"</span>等已经有了更新"},zhuigengNotice:function(b){var c=window.location.href;if(-1!=c.indexOf("index_page")||-1!=c.indexOf("publish_index_page")||-1!=c.indexOf("original_index_page.html")){var d='<div class="zhuigengNotice"><div class="title">更新通知<div class="closeBtn"></div></div><div class="content"><div>'+this.getMedia(b)+'</div><a class="gotoRead" href="booksshelf_page.html?tab=read">去书架</a></div></div>';a("body").append(d),a("body").delegate(".zhuigengNotice .closeBtn","click",function(){a(".zhuigengNotice").hide()})}}};return i}),define("original_product_catalog_left",["jquery","underscore","ddbase"],function(a,b,c){var d={};return d.init=function(d){var e=b.template(a(d.template).html()),f=c.getQueryString("mediaId");a.get(d.url+"&mediaId="+f,function(b){if("0"==b.data.shelfStatus||"0"==b.data.saleShelfStatus)return void(window.location.href="off_shelf_page.html");var c=a.extend({},{data:b.data},{mediaId:f});a(d.container).html(e(c))})},d}),define("original_product_copyright",["jquery","ddbase"],function(a,b){var c={};return c.init=function(c){var d=b.getQueryString("mediaId");a.get(c.url+"&mediaId="+d,function(b){var b=b.data.mediaSale.mediaList[0];a(".copyright_content span").each(function(){a(this).html(b.title)});var c=b.cpShortName;"自出版"==c&&(c="当当原创"),a(".copyright_content .copyright_provided").html(c),a("#categorys").html(b.categorys),a(".navigation_module").append('<a href="index_page.html">当当云阅读</a><a href="classification_list_page.html?category='+b.categoryIds+'&dimension=dd_sale&order=0">'+b.categorys+'</a><a class="focus">'+b.title+"</a>")})},c}),define("publicHeadersearch",["jquery"],function(a){return{getCursor:function(){a(".searchtext").on("focus",function(){"作品、作者、出版社"===a(this).val()&&a(this).val("")}),a(".searchtext").on("blur",function(){""===a(this).val()&&a(this).val("作品、作者、出版社")})},searchBtn:function(){a(".searchbtn").on("click",function(){""===a(".searchtext").val()||"作品、作者、出版社"===a(".searchtext").val()||(window.location="http://e.dangdang.com/searchresult_page.html?keyword="+a(".searchtext").val())}),document.onkeydown=function(b){var c=b||window.event||arguments.callee.caller.arguments[0];c&&13==c.keyCode&&(""===a(".searchtext").val()||"作品、作者、出版社"===a(".searchtext").val()||(window.location="http://e.dangdang.com/searchresult_page.html?keyword="+a(".searchtext").val()))}}}}),define("indexSearch",["jquery","underscore","ddbase"],function(a,b,c){var d={data:{url:"/media/api2.go?action=searchSug&type=1&keyword=",hotWordUrl:"/media/api.go?action=block&code=search_words"},getCookieValue:function(a){if(""==a||"null"==a)return"";var b=a.split(","),c="";if(b.length>0){for(var d=0;d<b.length;d++)""==b[d]?b.splice(d,1):c+=b[d]+",";return c}return""},uniquelCookie:function(a,b){b=b.split(",");for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},searchBtn:function(b,e,f){if(a(".delAll").remove(),d.uniquelCookie(b,e)||(""!=e?""!=b&&b.length<15?(e=b+","+e,e=e.substring(0,e.length-1),c.setCookie("bookName",e,24,"e.dangdang.com")):c.setCookie("bookName",e,24,"e.dangdang.com"):""!=b&&b.length<15&&(e=b,c.setCookie("bookName",e,24,"e.dangdang.com"))),!f){if(""!=b){var g=a(".new_searchtext").attr("default");g!=b&&(g=b),window.open("/newsearchresult_page.html?keyword="+encodeURIComponent(g))}return!1}var g=a(".new_searchtext").attr("default");g!=b&&(g=b),window.location.href="/newsearchresult_page.html?keyword="+encodeURIComponent(g)},history:function(b){if("null"!=b&&""!=b&&void 0!=b){var c=b.split(",");c=c.length>10?c.slice(0,10):c.slice(0);var e={},f={};f.sugs=[];for(var g=0;g<c.length;g++)if(""!=c[g]){var h={};h.freq=0,h.sug=c[g],f.sugs.push(h)}e.data=f,a(".delAll")&&a(".delAll").remove(),d.setHisDate(a(".new_list"),a(".new_list li"),e),a(".new_list li").css("color","#42abff"),a(".new_list li").hover(function(){"搜索历史"==a(this).find("em").text()?a(this).find("em").html("删除").css("color","#009cff"):a(this).find("em").html("搜索历史").css("color","#a1a1a1")})}},setData:function(a,c,d,e){var f=b.template(a.html());d.remove(),c.append(f(e))},setHisDate:function(c,d,e){var f="<%_.each(data.sugs,function(item,i){%><li><%=item.sug%><em>搜索历史</em></li><%})%>",g=b.template(f);d.remove(),c.append(g(e)),a(".new_list").append("<p class='delAll'>删除全部</p>")},hotWordSuccess:function(b){if(0==b.status.code){b=JSON.parse(b.data.block.replace(/\r\n/gi,""));var e=b.hotwords,f=b.defult;a(".new_search input").attr("default",f);-1==window.location.href.indexOf("keyword")&&a(".new_search input").val(f);var g=new RegExp("[;]","g");e=e.replace(g," ");var h=/\s+/g;e=e.replace(h,",").split(",");for(var i="",j=0;j<e.length;j++){var k=e[j].match(/\<[^\}]+\>/);k?(k=k[0],k=k.slice(1,k.length),k=k.slice(0,k.length-1),i+='<a data-href="'+k+'">'):i+="<a>",i+=e[j],i+="</a>"}a(".hotword").html("<em>搜索热词：</em>"+i),a(".hotword a").click(function(){var b=unescape(c.getCookie("bookName")),e=d.getCookieValue(b),f=a(this).text();d.uniquelCookie(f,e)||(e=f+","+e,e=e.substring(0,e.length-1),c.setCookie("bookName",e,24,"e.dangdang.com")),a(this).attr("data-href")?window.open(a(this).attr("data-href")):window.open("/newsearchresult_page.html?keyword="+encodeURIComponent(a(this).text()))})}},init:function(b){var e=this;if(b)var f=b.freshCurPage;var g=-1,h="";e.ajaxFn("Get",e.data.hotWordUrl,e.hotWordSuccess,e.hotWordError),a(".new_search").click(function(b){if(b.target=b.target||b.srcElement,"LI"==b.target.nodeName){var e=a.trim(a(b.target).text().replace("搜索历史","").replace("删除",""));a(this).find("input").val(e);var g=unescape(c.getCookie("bookName"));l=d.getCookieValue(g),d.searchBtn(e,l,f),a(this).find("ul li").css("display","none")}else if("SPAN"==b.target.nodeName){var g=unescape(c.getCookie("bookName"));l=d.getCookieValue(g);var h=a(".new_searchtext").val();d.searchBtn(h,l,f)}else if("EM"==b.target.nodeName&&"删除"==b.target.innerText){var i=a.trim(a(b.target).parent().text().replace("搜索历史","").replace("删除",""));a(b.target).parents("ul").css("display","block");var g=unescape(c.getCookie("bookName")),j=g.split(",");if(null!=g&&""!=g&&void 0!=g){j=j.length>10?j.slice(0,10):j.slice(0);for(var k=0;k<j.length;k++)i==j[k]&&(j.splice(k,1),k--);for(var l="",k=0;k<j.length;k++)l+=j[k]+",";l=l.substring(0,l.length-1),c.setCookie("bookName",l,24,"e.dangdang.com")}a(b.target).parent().remove(),0==a(".new_list li").length&&a(".delAll").remove()}else"P"==b.target.nodeName&&(c.setCookie("bookName","",24,"e.dangdang.com"),a(".new_list")[0].style.display="none")}).mouseout(function(b){var c=a(".new_searchtext").attr("default");c==a(".new_searchtext").val()&&a(".new_searchtext").val(c),b=b||window.event;var d=b.toElement||b.relatedTarget;this.contains(d)||(a(".new_list")[0].style.display="none")}),a(".new_searchtext").bind("input propertychange",function(){a(".new_list li").remove(),a(".delAll").remove(),a(".new_list")[0].style.display="block";var b=a(this).val(),f=unescape(c.getCookie("bookName"));""==b?""==f||"null"==f||void 0==f?(a(".new_list li").remove(),a(".delAll").remove()):d.history(f):e.showDetail(b)}).keyup(function(a){a=a||window.event,38==a.keyCode&&-1==g&&a.preventDefault()}).keydown(function(b){var e=b.keyCode;if(38==e){g-=1,g<=-1&&(g=a(".new_list li").length-1),a(".new_list li").eq(g).addClass("cur").siblings().removeClass("cur");var i=a.trim(a(".new_list li").eq(g).text()).replace("搜索历史","").replace("删除","");a(this).val(i)}else if(40==e)g+=1,g==a(".new_list li").length&&(g=0),a(".new_list li").eq(g).addClass("cur").siblings().removeClass("cur"),i=a.trim(a(".new_list li").eq(g).text()).replace("搜索历史","").replace("删除",""),a(this).val(i);else if(13==e){b.stopPropagation(),a(".new_list li").hasClass("cur")?(i=a.trim(a(".new_list li").eq(g).text()).replace("搜索历史","").replace("删除",""),a(this).val(i)):i=a(this).val();var j=unescape(c.getCookie("bookName"));h=d.getCookieValue(j),d.searchBtn(i,h,f)}}).focus(function(){a(".new_list")[0].style.display="block";var b=a(this).val(),f=a(this).attr("default");f==b&&(a(this).val(""),b=f);var g=unescape(c.getCookie("bookName"));h=d.getCookieValue(g),""==b?""==g||"null"==g||void 0==g?(a(".new_list li").remove(),a(".delAll").remove()):d.history(g):e.showDetail(b)})},showDetail:function(a){var b=this;b.ajaxFn("Get",b.data.url+a,b.showDetialSuc,b.showDetialError)},ajaxFn:function(b,c,d,e){a.ajax({url:c,type:b,dataType:"json",success:function(a){d(a)},error:function(a){e()}})},showDetialSuc:function(c){var d="<%_.each(data.sugs,function(item,i){%><li><%=item.sug%> </li><%})%>",e=b.template(d);a(".new_list li").remove(),a(".new_list").append(e(c))},showDetialError:function(){console.log("接口错误")}};return d}),require(["publicHeaderNav","publicMethodNew","publicSideCodeModule","original_product_catalog_left","original_product_copyright","publicHeaderChildnavModule","publicHeadersearch","indexSearch"],function(a,b,c,d,e,f,g,h){b.init(),h.init(),a.itHover(),f.itHover(),g.getCursor(),g.searchBtn(),$(".public_totop_module").click(function(){c.toTop()}),$(".public_sideecode_module .close").click(function(){c.closeCode()}),d.init({url:"/media/api2.go?action=getAllChapterByMediaId&deviceType=pconline&platformSource=DDDS-P&returnType=json&orderSource=30000",template:"#catalog_menu",container:"#original_catalog_show"}),e.init({url:"/media/api2.go?action=getMedia&deviceType=pconline&platformSource=DDDS-P"})}),define("original_product_catalog",function(){});